(this["webpackJsonpnews-admin"]=this["webpackJsonpnews-admin"]||[]).push([[0],{150:function(e,t,n){e.exports=n.p+"static/media/logo2.2a731020.png"},154:function(e,t,n){e.exports=n(294)},164:function(e,t,n){},169:function(e,t,n){},189:function(e,t,n){},214:function(e,t){},294:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),u=n.n(c),l=n(49),o=n(66),s=n(149),i=n(3),p=n.n(i);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(){return{news:[],input:"",date:p()(),focused:!1}}var f=Object(o.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEWS_CHANGE":var n=t.payload.news;return m({},e,{news:n});case"INPUT_CHANGE":var a=t.payload.value;return m({},e,{input:a});case"DATE_CHANGE":var r=t.payload.date;return m({},e,{date:r});case"FOCUSE_CHANGE":var c=t.payload.focused;return m({},e,{focused:c});case"RESET_NEWS":return m({},e,{news:[]});default:return e}})),b=(n(164),n(34)),E=n.n(b),O=n(57),j=n(22),g=n(23),v=n(25),y=n(24),w=n(26),C=n(50),_=n(33),k=n(48),N=(n(169),n(150)),D=n.n(N),S=function(e){function t(){return Object(j.a)(this,t),Object(v.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.news;return r.a.createElement("tr",null,r.a.createElement("td",null,p()(1e3*e.timestamp).format("YYYY-MM-DD HH:mm:ss")),r.a.createElement("td",null,p()(1e3*e.event_time).format("YYYY-MM-DD")),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.summary),r.a.createElement("td",null,e.thumbnail),r.a.createElement("td",null,e.content))}}]),t}(r.a.Component),x=r.a.createContext([]),A=n(151),P=n.n(A),T=(n(189),function(e){return Object(k.usePromiseTracker)().promiseInProgress&&r.a.createElement("div",{className:"spinner"},r.a.createElement(P.a,{type:"Audio",color:"#2BAD60",height:100,width:100}))}),H=function(e){function t(){return Object(j.a)(this,t),Object(v.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){console.log("props: ".concat(JSON.stringify(this.props)));var e=[],t=this.props.section_url.split("/")[1];return this.context.filter((function(e){return e.project===t})).forEach((function(t){e.push(r.a.createElement(S,{news:t,key:t._id}))})),r.a.createElement("div",{className:"newstable"},r.a.createElement("h1",null,"NewsTable"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"EventTime"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Summary"),r.a.createElement("th",null,"Thumbnail"),r.a.createElement("th",null,"Content"))),r.a.createElement("tbody",null,e)),r.a.createElement(T,null))}}]),t}(r.a.Component);H.contextType=x;var F=H,G=n(39),I=n(152),Y={news_change:function(e){return{type:"NEWS_CHANGE",payload:{news:e}}},input_change:function(e){return{type:"INPUT_CHANGE",payload:{value:e}}},date_change:function(e){return{type:"DATE_CHANGE",payload:{date:e}}},focuse_change:function(e){return{type:"FOCUSE_CHANGE",payload:{focused:e}}},reset_news:function(){return{type:"RESET_NEWS"}}},M=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(v.a)(this,Object(y.a)(t).call(this,e))).getNewsApi=Object(O.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/news");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw new Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),n.handleSubmit=function(){var e=Object(O.a)(E.a.mark((function e(t){var a,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.props.reset_news(),a=new FormData,r=n.props.section_url.split("/")[1],a.append("input",n.props.input),a.append("event_time",n.props.date),a.append("page_url",r),e.next=9,fetch("/api/news",{method:"POST",body:a,mode:"cors"});case 9:return c=e.sent,e.next=12,c.json();case 12:200===e.sent.status&&Object(k.trackPromise)(n.getNewsApi().then((function(e){return n.props.news_change(e.data)})).then((function(){return alert("insert succeed")})).catch((function(e){return console.error(e.stack)})));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleInputChange=n.handleInputChange.bind(Object(G.a)(n)),n.handleDateChange=n.handleDateChange.bind(Object(G.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(G.a)(n)),n.handleFocuseChange=n.handleFocuseChange.bind(Object(G.a)(n)),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"handleInputChange",value:function(e){this.props.input_change(e.target.value)}},{key:"handleDateChange",value:function(e){this.props.date_change(e)}},{key:"handleFocuseChange",value:function(e){this.props.focuse_change(e.focused)}},{key:"render",value:function(){return console.log("props: { section_url: ".concat(this.props.section_url,", date: ").concat(this.props.date,", input: ").concat(this.props.input,", focused: ").concat(this.props.focused,"}")),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"URL:"),r.a.createElement("div",{className:"url_text"},r.a.createElement("label",null,r.a.createElement("input",{type:"text",onChange:this.handleInputChange,placeholder:"please paste an url here"}))),r.a.createElement(I.SingleDatePicker,{date:this.props.date,id:"datepicker_id",onDateChange:this.handleDateChange,focused:this.props.focused,onFocusChange:this.handleFocuseChange,isOutsideRange:function(){return!1},showClearDate:!0}),r.a.createElement("input",{type:"submit",value:"Submit"}))}}]),t}(r.a.Component),U=Object(l.b)((function(e){return{news:e.news,input:e.input,date:e.date,focused:e.focused}}),Y)(M),J=function(e){function t(){return Object(j.a)(this,t),Object(v.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"section"},r.a.createElement(F,{section_url:this.props.match.url}),r.a.createElement(U,{section_url:this.props.match.url}))}}]),t}(r.a.Component);var R=function(e){return r.a.createElement("div",{className:"nav"},r.a.createElement("h3",null,"Navigation"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(C.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(C.b,{to:"/linke"},"Linke")),r.a.createElement("li",null,r.a.createElement(C.b,{to:"/dbj"},"DBJ"))))},W=(n(269),n(292),n(293),function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(v.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).getNewsApi=Object(O.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/news");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw new Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(k.trackPromise)(this.getNewsApi().then((function(t){return e.props.news_change(t.data)})).catch((function(e){return console.error(e.stack)})))}},{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:D.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",null,"Linke Technology")),r.a.createElement(R,null),r.a.createElement(x.Provider,{value:this.props.news},r.a.createElement(_.a,{exact:!0,path:"/",component:B}),r.a.createElement(_.a,{path:"/linke",component:J}),r.a.createElement(_.a,{path:"/dbj",component:J}))))}}]),t}(r.a.Component)),B=function(e){function t(){return Object(j.a)(this,t),Object(v.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),r.a.createElement("p",{className:"left"},"This is home page"))}}]),t}(r.a.Component),L=Object(l.b)((function(e){return{news:e.news}}),Y)(W),q=document.getElementById("root");u.a.render(r.a.createElement(l.a,{store:f},r.a.createElement(L,null)),q)}},[[154,1,2]]]);
//# sourceMappingURL=main.06a3fdcb.chunk.js.map