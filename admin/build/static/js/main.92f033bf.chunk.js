(this["webpackJsonpnews-admin"]=this["webpackJsonpnews-admin"]||[]).push([[0],{150:function(e,t,n){e.exports=n.p+"static/media/logo2.2a731020.png"},155:function(e,t,n){e.exports=n(296)},165:function(e,t,n){},170:function(e,t,n){},190:function(e,t,n){},216:function(e,t){},296:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),s=n.n(c),o=n(29),l=n(66),i=n(149),u=n(3),p=n.n(u);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(){return{news:[],input:"",date:p()(),focused:!1,items:[],select_mode:!1,parent_items:[]}}var f=Object(l.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEWS_CHANGE":var n=t.payload.news;return h({},e,{news:n});case"INPUT_CHANGE":var a=t.payload.value;return h({},e,{input:a});case"DATE_CHANGE":var r=t.payload.date;return h({},e,{date:r});case"FOCUSE_CHANGE":var c=t.payload.focused;return h({},e,{focused:c});case"RESET_NEWS":return h({},e,{news:[]});case"SELECTED_ITEMS_CHANGE":var s=t.payload.items;return h({},e,{items:s});case"SELECT_MODE_CHANGE":var o=t.payload.select_mode;return h({},e,{select_mode:o});case"PARENT_ITEMS_CHANGE":var l=t.payload.parent_items;return h({},e,{parent_items:l});default:return e}})),E=(n(165),n(15)),b=n.n(E),g=n(37),y=n(24),_=n(25),O=n(27),w=n(26),v=n(28),C=n(51),j=n(38),k=n(32),N=(n(170),n(150)),S=n.n(N),D=n(21),A=n(151),T={news_change:function(e){return{type:"NEWS_CHANGE",payload:{news:e}}},input_change:function(e){return{type:"INPUT_CHANGE",payload:{value:e}}},date_change:function(e){return{type:"DATE_CHANGE",payload:{date:e}}},focuse_change:function(e){return{type:"FOCUSE_CHANGE",payload:{focused:e}}},reset_news:function(){return{type:"RESET_NEWS"}},selected_items_change:function(e){return{type:"SELECTED_ITEMS_CHANGE",payload:{items:e}}},select_mode_change:function(e){return{type:"SELECT_MODE_CHANGE",payload:{select_mode:e}}},parent_items_change:function(e){return{type:"PARENT_ITEMS_CHANGE",payload:{parent_items:e}}}},x=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(O.a)(this,Object(w.a)(t).call(this,e))).onCheckedStatusChange=n.onCheckedStatusChange.bind(Object(D.a)(n)),n.state={checked:!1},n}return Object(v.a)(t,e),Object(_.a)(t,[{key:"onCheckedStatusChange",value:function(){this.setState({checked:!this.state.checked}),!0===document.getElementsByClassName("selected_style")[this.props.index].checked?this.props.items.push(this.props.news._id):this.props.items.splice(this.props.index,1),this.props.selected_items_change(this.props.items),this.props.getItems(this.props.items)}},{key:"render",value:function(){console.log("[NewsRow props]: { items: ".concat(this.props.items,", index: ").concat(this.props.index," }")),console.log("[NewsRow state]: { checked: ".concat(this.state.checked," }"));var e=this.props.news;return r.a.createElement("tr",null,r.a.createElement("td",{className:"cb_style"},r.a.createElement("input",{id:this.props.news._id,className:"selected_style",type:"checkbox",onChange:this.onCheckedStatusChange,checked:this.state.checked}),r.a.createElement("label",{htmlFor:this.props.news._id})),r.a.createElement("td",null,p()(1e3*e.timestamp).format("YYYY-MM-DD HH:mm:ss")),r.a.createElement("td",null,p()(1e3*e.event_time).format("YYYY-MM-DD")),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.summary),r.a.createElement("td",null,e.thumbnail),r.a.createElement("td",null,e.content))}}]),t}(r.a.Component),I=Object(o.b)((function(e){return{items:e.items}}),T)(x),M=n(152),H=n.n(M),P=(n(190),function(e){return Object(k.usePromiseTracker)().promiseInProgress&&r.a.createElement("div",{className:"spinner"},r.a.createElement(H.a,{type:"Audio",color:"#2BAD60",height:100,width:100}))}),B=(n(191),function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(O.a)(this,Object(w.a)(t).call(this,e))).getNewsApi=Object(g.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/news");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw new Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),n.onConfirmDelete=Object(g.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="/api/news",a=document.getElementsByClassName("cb_style"),n.props.parent_items.length>0&&(1===n.props.parent_items.length&&(t="".concat(t,"?id=").concat(n.props.parent_items[0])),n.props.parent_items.length>1&&(t="".concat(t,"?id=").concat(n.props.parent_items.join("&id=")))),Object(k.trackPromise)(fetch(t,{method:"DELETE",mode:"cors"}).then((function(){return n.getNewsApi()})).then((function(e){return n.props.news_change(e.data)})).then((function(){n.selectModeOff(a),alert("Delete succeed")})).catch((function(e){return console.error(e.stack)})));case 4:case"end":return e.stop()}}),e)}))),n.onSelectStatusChange=n.onSelectStatusChange.bind(Object(D.a)(n)),n.onConfirmDelete=n.onConfirmDelete.bind(Object(D.a)(n)),n}return Object(v.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(k.trackPromise)(this.getNewsApi().then((function(t){return e.props.news_change(t.data)})).catch((function(e){return console.error(e.stack)})))}},{key:"selectModeOn",value:function(e){document.getElementById("manage_btn").innerHTML="Cancel",document.getElementById("manage_btn").style.backgroundColor="red",document.getElementById("status_header").style.display="table-cell",document.getElementById("delete_btn").style.display="table-cell";for(var t=0;t<e.length;t+=1)e[t].style.display="table-cell"}},{key:"selectModeOff",value:function(e){document.getElementById("manage_btn").innerHTML="Manage news",document.getElementById("manage_btn").style.backgroundColor="#4CAF50",document.getElementById("status_header").style.display="none",document.getElementById("delete_btn").style.display="none";for(var t=0;t<e.length;t+=1)e[t].style.display="none"}},{key:"getItems",value:function(e){this.props.parent_items_change(e)}},{key:"onSelectStatusChange",value:function(){var e=document.getElementsByClassName("cb_style");!1===this.props.select_mode&&this.selectModeOn(e),!0===this.props.select_mode&&this.selectModeOff(e),this.props.select_mode_change(!this.props.select_mode)}},{key:"render",value:function(){var e=this;console.log("[NewsTable props]: ".concat(JSON.stringify(this.props)));var t=[],n=this.props.section_url.split("/")[1];return this.props.news.filter((function(e){return e.project===n})).forEach((function(n,a){t.push(r.a.createElement(I,{news:n,key:n._id,index:a,getItems:e.getItems.bind(e)}))})),r.a.createElement("div",{className:"newstable"},r.a.createElement("h1",null,"NewsTable"),r.a.createElement("button",{id:"manage_btn",onClick:this.onSelectStatusChange},"Manage news"),r.a.createElement("button",{id:"delete_btn",onClick:function(){Object(A.confirmAlert)({customUI:function(t){var n=t.onClose;return r.a.createElement("div",{className:"custom-ui"},r.a.createElement("h1",null,"Are you sure?"),r.a.createElement("p",null,"You want to delete these news?"),r.a.createElement("button",{onClick:n},"NO"),r.a.createElement("button",{onClick:function(){e.onConfirmDelete(),n()}},"YES"))}})}},"Delete"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{id:"status_header"},"Status"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"EventTime"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Summary"),r.a.createElement("th",null,"Thumbnail"),r.a.createElement("th",null,"Content"))),r.a.createElement("tbody",null,t)),r.a.createElement(P,null))}}]),t}(r.a.Component)),G=Object(o.b)((function(e){return{news:e.news,select_mode:e.select_mode,parent_items:e.parent_items}}),T)(B),F=n(153),L=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(O.a)(this,Object(w.a)(t).call(this,e))).getNewsApi=Object(g.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/news");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw new Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),n.handleSubmit=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.props.reset_news(),a=new FormData,r=n.props.section_url.split("/")[1],a.append("input",n.props.input),a.append("event_time",n.props.date),a.append("page_url",r),e.next=9,fetch("/api/news",{method:"POST",body:a,mode:"cors"});case 9:return c=e.sent,e.next=12,c.json();case 12:200===e.sent.status&&Object(k.trackPromise)(n.getNewsApi().then((function(e){return n.props.news_change(e.data)})).then((function(){return alert("insert succeed")})).catch((function(e){return console.error(e.stack)})));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleInputChange=n.handleInputChange.bind(Object(D.a)(n)),n.handleDateChange=n.handleDateChange.bind(Object(D.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.handleFocuseChange=n.handleFocuseChange.bind(Object(D.a)(n)),n}return Object(v.a)(t,e),Object(_.a)(t,[{key:"handleInputChange",value:function(e){this.props.input_change(e.target.value)}},{key:"handleDateChange",value:function(e){this.props.date_change(e)}},{key:"handleFocuseChange",value:function(e){this.props.focuse_change(e.focused)}},{key:"render",value:function(){return console.log("[AddNewsForm props]: { section_url: ".concat(this.props.section_url,", date: ").concat(this.props.date,", input: ").concat(this.props.input,", focused: ").concat(this.props.focused,"}")),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"URL:"),r.a.createElement("div",{className:"url_text"},r.a.createElement("label",null,r.a.createElement("input",{type:"text",onChange:this.handleInputChange,placeholder:"please paste an url here"}))),r.a.createElement(F.SingleDatePicker,{date:this.props.date,id:"datepicker_id",onDateChange:this.handleDateChange,focused:this.props.focused,onFocusChange:this.handleFocuseChange,isOutsideRange:function(){return!1},showClearDate:!0}),r.a.createElement("input",{type:"submit",value:"Submit"}))}}]),t}(r.a.Component),Y=Object(o.b)((function(e){return{news:e.news,input:e.input,date:e.date,focused:e.focused}}),T)(L),R=function(e){function t(){return Object(y.a)(this,t),Object(O.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"section"},r.a.createElement(G,{section_url:this.props.match.url}),r.a.createElement(Y,{section_url:this.props.match.url}))}}]),t}(r.a.Component);var U=function(e){return r.a.createElement("div",{className:"nav"},r.a.createElement("h3",null,"Navigation"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(C.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(C.b,{to:"/linke"},"Linke")),r.a.createElement("li",null,r.a.createElement(C.b,{to:"/dbj"},"DBJ"))))},J=(n(271),n(294),n(295),function(e){function t(){var e,n;Object(y.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).getNewsApi=Object(g.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/news");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw new Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),n}return Object(v.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(k.trackPromise)(this.getNewsApi().then((function(t){return e.props.news_change(t.data)})).catch((function(e){return console.error(e.stack)})))}},{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:S.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",null,"Linke Technology")),r.a.createElement(U,null),r.a.createElement(j.a,{exact:!0,path:"/",component:W}),r.a.createElement(j.a,{path:"/linke",component:R}),r.a.createElement(j.a,{path:"/dbj",component:R})))}}]),t}(r.a.Component)),W=function(e){function t(){return Object(y.a)(this,t),Object(O.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),r.a.createElement("p",{className:"left"},"This is home page"))}}]),t}(r.a.Component),q=Object(o.b)((function(e){return{news:e.news}}),T)(J),z=document.getElementById("root");s.a.render(r.a.createElement(o.a,{store:f},r.a.createElement(q,null)),z)}},[[155,1,2]]]);
//# sourceMappingURL=main.92f033bf.chunk.js.map