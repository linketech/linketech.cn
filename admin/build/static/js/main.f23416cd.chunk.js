(this["webpackJsonpnews-admin"]=this["webpackJsonpnews-admin"]||[]).push([[0],{31:function(e,t,n){e.exports=n.p+"static/media/logo2.2a731020.png"},34:function(e,t,n){e.exports=n(48)},43:function(e,t,n){},45:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),l=n.n(c),u=n(14),o=n(21),s=n(30);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=Object(o.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{news:[],input:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEWS_CHANGE":var n=t.payload.news;return p({},e,{news:n});case"INPUT_CHANGE":var a=t.payload.value;return p({},e,{input:a});default:return e}})),h=(n(43),n(15)),b=n.n(h),f=n(22),E=n(6),d=n(7),O=n(9),j=n(8),v=n(10),y=n(16),w=n(13),g=(n(45),n(31)),k=n.n(g),N=n(32),x=n.n(N),C=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.news;return r.a.createElement("tr",null,r.a.createElement("td",null,x()(1e3*e.timestamp).format("YYYY-MM-DD HH:mm:ss")),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.summary),r.a.createElement("td",null,e.thumbnail),r.a.createElement("td",null,e.content))}}]),t}(r.a.Component),_=r.a.createContext([]),S=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){console.log("props: ".concat(JSON.stringify(this.props)));var e=[],t=this.props.section_url.split("/")[1];return this.context.filter((function(e){return e.project===t})).forEach((function(t){e.push(r.a.createElement(C,{news:t,key:t._id}))})),r.a.createElement("div",null,r.a.createElement("h1",null,"NewsTable"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Summary"),r.a.createElement("th",null,"Thumbnail"),r.a.createElement("th",null,"Content"))),r.a.createElement("tbody",null,e)))}}]),t}(r.a.Component);S.contextType=_;var P=S,D=n(18),A={news_change:function(e){return{type:"NEWS_CHANGE",payload:{news:e}}},input_change:function(e){return{type:"INPUT_CHANGE",payload:{value:e}}}},T=function(e){function t(e){var n;return Object(E.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).handleSubmit=function(){var e=Object(f.a)(b.a.mark((function e(t){var a,r,c,l,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=new FormData,r=n.props.section_url.split("/")[1],a.append("input",n.props.input),a.append("page_url",r),e.next=7,fetch("/news",{method:"POST",body:a,mode:"cors"});case 7:return c=e.sent,e.next=10,c.json();case 10:if(200!==e.sent.status){e.next=22;break}return e.next=14,fetch("/news");case 14:return l=e.sent,e.next=17,l.json();case 17:if(u=e.sent,200===l.status){e.next=20;break}throw new Error(u.message);case 20:n.props.news_change(u.data),alert("Insert succeed");case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=n.handleChange.bind(Object(D.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){this.props.input_change(e.target.value)}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"URL:"),r.a.createElement("label",null,r.a.createElement("input",{type:"text",onChange:this.handleChange,placeholder:"please paste an url here"})),r.a.createElement("input",{type:"submit",value:"Submit"}))}}]),t}(r.a.Component),H=Object(u.b)((function(e){return{news:e.news,input:e.input}}),A)(T),G=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"section"},r.a.createElement(P,{section_url:this.props.match.url}),r.a.createElement(H,{section_url:this.props.match.url}))}}]),t}(r.a.Component);var I=function(e){return r.a.createElement("div",{className:"nav"},r.a.createElement("h3",null,"Navigation"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(y.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(y.b,{to:"/linke"},"Linke")),r.a.createElement("li",null,r.a.createElement(y.b,{to:"/dbj"},"DBJ"))))},J=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).getNewsApi=Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/news");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw new Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getNewsApi().then((function(t){return e.props.news_change(t.data)})).catch((function(e){return console.error(e.stack)}))}},{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:k.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",null,"Linke Technology")),r.a.createElement(I,null),r.a.createElement(_.Provider,{value:this.props.news},r.a.createElement(w.a,{exact:!0,path:"/",component:Y}),r.a.createElement(w.a,{path:"/linke",component:G}),r.a.createElement(w.a,{path:"/dbj",component:G}))))}}]),t}(r.a.Component),Y=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),r.a.createElement("p",{className:"left"},"This is home page"))}}]),t}(r.a.Component),L=Object(u.b)((function(e){return{news:e.news}}),A)(J),M=document.getElementById("root");l.a.render(r.a.createElement(u.a,{store:m},r.a.createElement(L,null)),M)}},[[34,1,2]]]);
//# sourceMappingURL=main.f23416cd.chunk.js.map